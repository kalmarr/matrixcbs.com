exports.id=906,exports.ids=[906],exports.modules={43662:(a,b,c)=>{"use strict";c.d(b,{A:()=>x});var d=c(21124),e=c(53603),f=c(93065),g=c(72576),h=c(8842),i=c(38301),j=c(91994),k=c(26369),l=c(99505),m=c(3040),n=c(32467),o=c(55705),p=c(70949),q=c(50117),r=c(99458),s=c(46148),t=c(3350),u=c.n(t);function v({onClick:a,isActive:b=!1,disabled:c=!1,title:e,children:f}){return(0,d.jsx)("button",{type:"button",onClick:a,disabled:c,title:e,className:`p-2 rounded transition-colors ${b?"bg-orange-100 text-orange-600":"hover:bg-gray-100 text-gray-600"} ${c?"opacity-50 cursor-not-allowed":""}`,children:f})}function w(){return(0,d.jsx)("div",{className:"w-px h-6 bg-gray-300 mx-1"})}function x({content:a,onChange:b,placeholder:c="Kezdj el \xedrni...",minHeight:t="200px",onImageInsert:x,showImageButton:y=!0}){let[z,A]=(0,i.useState)(!1),[B,C]=(0,i.useState)(""),D=(0,e.hG)({immediatelyRender:!1,extensions:[f.A.configure({heading:{levels:[1,2,3]}}),g.Ay.configure({openOnClick:!1,HTMLAttributes:{class:"text-orange-600 underline hover:text-orange-700"}}),h.Ay.configure({HTMLAttributes:{class:"max-w-full h-auto rounded-lg my-4"}})],content:a,editorProps:{attributes:{class:"prose prose-sm max-w-none focus:outline-none",style:`min-height: ${t}`}},onUpdate:({editor:a})=>{let c=a.getHTML();b(u().sanitize(c,{ALLOWED_TAGS:["p","br","strong","em","u","h1","h2","h3","ul","ol","li","a","img","blockquote"],ALLOWED_ATTR:["href","target","rel","src","alt","class"]}))}}),E=(0,i.useCallback)(()=>{D&&(B&&D.chain().focus().extendMarkRange("link").setLink({href:B,target:"_blank"}).run(),C(""),A(!1))},[D,B]),F=(0,i.useCallback)(()=>{D&&D.chain().focus().unsetLink().run()},[D]);return((0,i.useCallback)(a=>{D&&D.chain().focus().setImage({src:a}).run()},[D]),D)?(0,d.jsxs)("div",{className:"border border-gray-300 rounded-lg overflow-hidden",children:[(0,d.jsxs)("div",{className:"flex flex-wrap items-center gap-1 p-2 border-b border-gray-300 bg-gray-50",children:[(0,d.jsx)(v,{onClick:()=>D.chain().focus().toggleBold().run(),isActive:D.isActive("bold"),title:"F\xe9lk\xf6v\xe9r (Ctrl+B)",children:(0,d.jsx)(j.A,{className:"w-4 h-4"})}),(0,d.jsx)(v,{onClick:()=>D.chain().focus().toggleItalic().run(),isActive:D.isActive("italic"),title:"DÅ‘lt (Ctrl+I)",children:(0,d.jsx)(k.A,{className:"w-4 h-4"})}),(0,d.jsx)(w,{}),(0,d.jsx)(v,{onClick:()=>D.chain().focus().toggleHeading({level:1}).run(),isActive:D.isActive("heading",{level:1}),title:"C\xedmsor 1",children:(0,d.jsx)(l.A,{className:"w-4 h-4"})}),(0,d.jsx)(v,{onClick:()=>D.chain().focus().toggleHeading({level:2}).run(),isActive:D.isActive("heading",{level:2}),title:"C\xedmsor 2",children:(0,d.jsx)(m.A,{className:"w-4 h-4"})}),(0,d.jsx)(v,{onClick:()=>D.chain().focus().toggleHeading({level:3}).run(),isActive:D.isActive("heading",{level:3}),title:"C\xedmsor 3",children:(0,d.jsx)(n.A,{className:"w-4 h-4"})}),(0,d.jsx)(w,{}),(0,d.jsx)(v,{onClick:()=>D.chain().focus().toggleBulletList().run(),isActive:D.isActive("bulletList"),title:"Felsorol\xe1s",children:(0,d.jsx)(o.A,{className:"w-4 h-4"})}),(0,d.jsx)(v,{onClick:()=>D.chain().focus().toggleOrderedList().run(),isActive:D.isActive("orderedList"),title:"Sz\xe1moz\xe1s",children:(0,d.jsx)(p.A,{className:"w-4 h-4"})}),(0,d.jsx)(w,{}),z?(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[(0,d.jsx)("input",{type:"url",value:B,onChange:a=>C(a.target.value),placeholder:"https://...",className:"px-2 py-1 border border-gray-300 rounded text-sm w-48 focus:ring-2 focus:ring-orange-500 focus:border-transparent",onKeyDown:a=>{"Enter"===a.key?(a.preventDefault(),E()):"Escape"===a.key&&(A(!1),C(""))},autoFocus:!0}),(0,d.jsx)("button",{type:"button",onClick:E,className:"px-2 py-1 bg-orange-500 text-white rounded text-sm hover:bg-orange-600 transition-colors",children:"OK"}),(0,d.jsx)("button",{type:"button",onClick:()=>{A(!1),C("")},className:"px-2 py-1 bg-gray-200 text-gray-600 rounded text-sm hover:bg-gray-300 transition-colors",children:"M\xe9gse"})]}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(v,{onClick:()=>{C(D.getAttributes("link").href||""),A(!0)},isActive:D.isActive("link"),title:"Link besz\xfar\xe1s",children:(0,d.jsx)(q.A,{className:"w-4 h-4"})}),D.isActive("link")&&(0,d.jsx)(v,{onClick:F,title:"Link t\xf6rl\xe9se",children:(0,d.jsx)(r.A,{className:"w-4 h-4"})})]}),y&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(w,{}),(0,d.jsx)(v,{onClick:()=>x?.(),title:"K\xe9p besz\xfar\xe1s",children:(0,d.jsx)(s.A,{className:"w-4 h-4"})})]})]}),(0,d.jsxs)("div",{className:"p-4 bg-white",children:[(0,d.jsx)(e.$Z,{editor:D,className:"[&_.ProseMirror]:outline-none [&_.ProseMirror]:text-gray-900 [&_.ProseMirror]:min-h-[200px] [&_.ProseMirror_p]:mb-2 [&_.ProseMirror_h1]:text-2xl [&_.ProseMirror_h1]:font-bold [&_.ProseMirror_h1]:mb-4 [&_.ProseMirror_h1]:text-gray-900 [&_.ProseMirror_h2]:text-xl [&_.ProseMirror_h2]:font-semibold [&_.ProseMirror_h2]:mb-3 [&_.ProseMirror_h2]:text-gray-900 [&_.ProseMirror_h3]:text-lg [&_.ProseMirror_h3]:font-semibold [&_.ProseMirror_h3]:mb-2 [&_.ProseMirror_h3]:text-gray-900 [&_.ProseMirror_ul]:list-disc [&_.ProseMirror_ul]:pl-5 [&_.ProseMirror_ul]:mb-2 [&_.ProseMirror_ol]:list-decimal [&_.ProseMirror_ol]:pl-5 [&_.ProseMirror_ol]:mb-2 [&_.ProseMirror_li]:mb-1"}),D.isEmpty&&(0,d.jsx)("p",{className:"text-gray-400 pointer-events-none absolute top-4 left-4",children:c})]}),(0,d.jsxs)("div",{className:"px-4 py-2 border-t border-gray-200 bg-gray-50 text-right text-xs text-gray-500",children:[D.storage.characterCount?.characters?.()??D.getText().length," karakter"]})]}):(0,d.jsxs)("div",{className:"border border-gray-300 rounded-lg p-4 min-h-[200px] animate-pulse bg-gray-50",children:[(0,d.jsx)("div",{className:"h-4 bg-gray-200 rounded w-1/2 mb-2"}),(0,d.jsx)("div",{className:"h-4 bg-gray-200 rounded w-3/4"})]})}},61601:(a,b,c)=>{Promise.resolve().then(c.bind(c,93972))},79526:(a,b,c)=>{"use strict";c.r(b),c.d(b,{default:()=>C});var d=c(21124),e=c(38301),f=c(99400),g=c(42378),h=c(3991),i=c.n(h),j=c(77850),k=c(3663),l=c(15350),m=c(76072),n=c(46148),o=c(44688),p=c(30733),q=c(46262),r=c(18004),s=c(65893),t=c(94684),u=c(14263),v=c(47089),w=c(19710),x=c(6130),y=c(10578),z=c(85351);let A=[{name:"Dashboard",href:"/admin",icon:j.A},{name:"Posztok",href:"/admin/posts",icon:k.A},{name:"Kateg\xf3ri\xe1k",href:"/admin/categories",icon:l.A},{name:"C\xedmk\xe9k",href:"/admin/tags",icon:m.A},{name:"M\xe9diat\xe1r",href:"/admin/media",icon:n.A},{name:"\xdczenetek",href:"/admin/messages",icon:o.A},{name:"Referenci\xe1k",href:"/admin/references",icon:p.A},{name:"GYIK",href:"/admin/faqs",icon:q.A},{name:"Teljes\xedtm\xe9ny",href:"/admin/web-vitals",icon:r.A},{name:"Felhaszn\xe1l\xf3k",href:"/admin/settings/users",icon:s.A},{name:"Be\xe1ll\xedt\xe1sok",href:"/admin/settings",icon:t.A}];function B({children:a}){let{data:b,status:c}=(0,f.wV)();(0,g.useRouter)();let h=(0,g.usePathname)(),[j,k]=(0,e.useState)(!1),[l,m]=(0,e.useState)(!1),n="/admin/login"===h;if("loading"===c)return(0,d.jsx)("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center",children:(0,d.jsxs)("div",{className:"text-center",children:[(0,d.jsx)(u.A,{className:"w-8 h-8 text-orange-500 animate-spin mx-auto mb-4"}),(0,d.jsx)("p",{className:"text-gray-400",children:"Bet\xf6lt\xe9s..."})]})});if(n)return(0,d.jsx)(d.Fragment,{children:a});if("unauthenticated"===c)return(0,d.jsx)("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center",children:(0,d.jsxs)("div",{className:"text-center",children:[(0,d.jsx)(u.A,{className:"w-8 h-8 text-orange-500 animate-spin mx-auto mb-4"}),(0,d.jsx)("p",{className:"text-gray-400",children:"\xc1tir\xe1ny\xedt\xe1s..."})]})});let o=async()=>{await (0,f.CI)({callbackUrl:"/admin/login"})};return(0,d.jsxs)("div",{className:"min-h-screen bg-gray-100",children:[j&&(0,d.jsx)("div",{className:"fixed inset-0 z-40 bg-black/50 lg:hidden",onClick:()=>k(!1)}),(0,d.jsxs)("aside",{className:`fixed top-0 left-0 z-50 w-64 h-full bg-gray-900 transform transition-transform duration-300 lg:translate-x-0 ${j?"translate-x-0":"-translate-x-full"}`,children:[(0,d.jsxs)("div",{className:"h-16 flex items-center justify-between px-4 border-b border-gray-800",children:[(0,d.jsxs)(i(),{href:"/admin",className:"flex items-center gap-2",children:[(0,d.jsx)("div",{className:"w-8 h-8 bg-orange-500 rounded-lg flex items-center justify-center",children:(0,d.jsx)("span",{className:"text-white font-bold text-sm",children:"M"})}),(0,d.jsx)("span",{className:"text-white font-semibold",children:"MATRIX CBS"})]}),(0,d.jsx)("button",{onClick:()=>k(!1),className:"lg:hidden text-gray-400 hover:text-white",children:(0,d.jsx)(v.A,{className:"w-5 h-5"})})]}),(0,d.jsx)("nav",{className:"p-4 space-y-1 overflow-y-auto",style:{maxHeight:"calc(100vh - 140px)"},children:A.map(a=>{let b=h===a.href||"/admin"!==a.href&&h.startsWith(a.href);return(0,d.jsxs)(i(),{href:a.href,onClick:()=>k(!1),className:`flex items-center gap-3 px-3 py-2 rounded-lg text-sm font-medium transition ${b?"bg-orange-500 text-white":"text-gray-300 hover:bg-gray-800 hover:text-white"}`,children:[(0,d.jsx)(a.icon,{className:"w-5 h-5"}),a.name]},a.name)})}),(0,d.jsx)("div",{className:"absolute bottom-0 left-0 right-0 p-4 border-t border-gray-800",children:(0,d.jsxs)(i(),{href:"/",className:"flex items-center gap-3 px-3 py-2 rounded-lg text-sm text-gray-400 hover:text-white hover:bg-gray-800 transition",children:[(0,d.jsx)(w.A,{className:"w-5 h-5"}),"Vissza a weboldalra"]})})]}),(0,d.jsxs)("div",{className:"lg:pl-64",children:[(0,d.jsxs)("header",{className:"h-16 bg-white border-b border-gray-200 flex items-center justify-between px-4 lg:px-6",children:[(0,d.jsx)("button",{onClick:()=>k(!0),className:"lg:hidden p-2 text-gray-500 hover:text-gray-700",children:(0,d.jsx)(x.A,{className:"w-6 h-6"})}),(0,d.jsx)("div",{className:"hidden lg:block"}),(0,d.jsxs)("div",{className:"relative",children:[(0,d.jsxs)("button",{onClick:()=>m(!l),className:"flex items-center gap-2 px-3 py-2 rounded-lg hover:bg-gray-100 transition",children:[(0,d.jsx)("div",{className:"w-8 h-8 bg-orange-100 rounded-full flex items-center justify-center",children:(0,d.jsx)(y.A,{className:"w-4 h-4 text-orange-600"})}),(0,d.jsx)("span",{className:"hidden sm:block text-sm font-medium text-gray-700",children:b?.user?.name||b?.user?.email||"Admin"}),(0,d.jsx)(z.A,{className:"w-4 h-4 text-gray-400"})]}),l&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("div",{className:"fixed inset-0 z-10",onClick:()=>m(!1)}),(0,d.jsxs)("div",{className:"absolute right-0 mt-2 w-48 bg-white border border-gray-200 rounded-lg shadow-lg z-20",children:[(0,d.jsxs)("div",{className:"px-4 py-3 border-b border-gray-100",children:[(0,d.jsx)("p",{className:"text-sm font-medium text-gray-900",children:b?.user?.name||"Admin"}),(0,d.jsx)("p",{className:"text-xs text-gray-500",children:b?.user?.email})]}),(0,d.jsxs)("div",{className:"py-1",children:[(0,d.jsx)(i(),{href:"/admin/settings",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",onClick:()=>m(!1),children:"Be\xe1ll\xedt\xe1sok"}),(0,d.jsx)("button",{onClick:o,className:"w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-red-50",children:"Kijelentkez\xe9s"})]})]})]})]})]}),(0,d.jsx)("main",{className:"p-4 lg:p-6",children:a})]})]})}function C({children:a}){return(0,d.jsx)(f.CP,{children:(0,d.jsx)(B,{children:a})})}},91105:(a,b,c)=>{Promise.resolve().then(c.bind(c,79526))},93972:(a,b,c)=>{"use strict";c.r(b),c.d(b,{default:()=>d});let d=(0,c(97954).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/app/src/app/admin/layout.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/app/src/app/admin/layout.tsx","default")},96736:(a,b,c)=>{"use strict";c.d(b,{A:()=>l});var d=c(21124),e=c(38301),f=c(47089),g=c(88285),h=c(14263),i=c(43700),j=c(71613),k=c(24515);function l({isOpen:a,onClose:b,onSelect:c}){let[l,m]=(0,e.useState)([]),[n,o]=(0,e.useState)(!1),[p,q]=(0,e.useState)(!1),[r,s]=(0,e.useState)(""),[t,u]=(0,e.useState)(null),v=async()=>{o(!0);try{let a=new URLSearchParams({page:"1",limit:"48",mimeType:"image"});r&&a.append("search",r);let b=await fetch(`/api/admin/media?${a}`),c=await b.json();c.media&&m(c.media)}catch(a){console.error("Failed to fetch media:",a)}finally{o(!1)}},w=async a=>{let b=a.target.files;if(b&&0!==b.length){q(!0);try{for(let a of Array.from(b)){let b=new FormData;b.append("file",a),b.append("folder","blog");let c=await fetch("/api/admin/media/upload/",{method:"POST",body:b}),d=await c.json();d.success||alert(`Hiba a f\xe1jl felt\xf6lt\xe9sekor: ${a.name}
${d.error}`)}await v(),a.target.value=""}catch(a){console.error("Upload failed:",a),alert("Hiba t\xf6rt\xe9nt a felt\xf6lt\xe9s sor\xe1n")}finally{q(!1)}}};return a?(0,d.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50",onClick:b,children:(0,d.jsxs)("div",{className:"relative w-full max-w-4xl max-h-[85vh] bg-white rounded-lg overflow-hidden flex flex-col",onClick:a=>a.stopPropagation(),children:[(0,d.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[(0,d.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"K\xe9p kiv\xe1laszt\xe1sa"}),(0,d.jsx)("button",{type:"button",onClick:b,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:(0,d.jsx)(f.A,{className:"w-5 h-5"})})]}),(0,d.jsxs)("div",{className:"flex items-center gap-4 p-4 border-b border-gray-200 bg-gray-50",children:[(0,d.jsxs)("div",{className:"relative flex-1 max-w-md",children:[(0,d.jsx)(g.A,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),(0,d.jsx)("input",{type:"text",value:r,onChange:a=>s(a.target.value),placeholder:"Keres\xe9s...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent"})]}),(0,d.jsxs)("label",{className:"relative cursor-pointer",children:[(0,d.jsx)("input",{type:"file",accept:"image/*",multiple:!0,onChange:w,disabled:p,className:"hidden"}),(0,d.jsx)("span",{className:"flex items-center gap-2 px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 disabled:opacity-50 transition-colors font-medium",children:p?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(h.A,{className:"w-4 h-4 animate-spin"}),"Felt\xf6lt\xe9s..."]}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(i.A,{className:"w-4 h-4"}),"Felt\xf6lt\xe9s"]})})]})]}),(0,d.jsx)("div",{className:"flex-1 overflow-y-auto p-4",children:n?(0,d.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,d.jsx)(h.A,{className:"w-8 h-8 animate-spin text-orange-600"})}):0===l.length?(0,d.jsx)("div",{className:"text-center py-12",children:(0,d.jsx)("p",{className:"text-gray-500",children:"Nincs tal\xe1lat"})}):(0,d.jsx)("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-6 gap-3",children:l.map(a=>(0,d.jsxs)("button",{type:"button",onClick:()=>u(a),className:`relative aspect-square rounded-lg overflow-hidden border-2 transition-all ${t?.id===a.id?"border-orange-500 ring-2 ring-orange-500/20":"border-transparent hover:border-gray-300"}`,children:[(0,d.jsx)(k.default,{src:`/${a.thumbnailPath||a.path}`,alt:a.alt||a.originalName,fill:!0,className:"object-cover",sizes:"(max-width: 640px) 33vw, (max-width: 768px) 25vw, 16vw"}),t?.id===a.id&&(0,d.jsx)("div",{className:"absolute inset-0 bg-orange-500/20 flex items-center justify-center",children:(0,d.jsx)("div",{className:"w-8 h-8 rounded-full bg-orange-500 flex items-center justify-center",children:(0,d.jsx)(j.A,{className:"w-5 h-5 text-white"})})})]},a.id))})}),(0,d.jsxs)("div",{className:"flex items-center justify-between p-4 border-t border-gray-200 bg-gray-50",children:[t?(0,d.jsxs)("div",{className:"flex items-center gap-3 text-sm text-gray-600",children:[(0,d.jsx)("span",{className:"font-medium",children:t.originalName}),(0,d.jsx)("span",{className:"text-gray-400",children:"|"}),(0,d.jsx)("span",{children:function(a){if(0===a)return"0 B";let b=Math.floor(Math.log(a)/Math.log(1024));return parseFloat((a/Math.pow(1024,b)).toFixed(2))+" "+["B","KB","MB","GB"][b]}(t.size)}),t.width&&t.height&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("span",{className:"text-gray-400",children:"|"}),(0,d.jsxs)("span",{children:[t.width," \xd7 ",t.height]})]})]}):(0,d.jsx)("div",{className:"text-sm text-gray-500",children:"V\xe1lassz ki egy k\xe9pet"}),(0,d.jsxs)("div",{className:"flex items-center gap-3",children:[(0,d.jsx)("button",{type:"button",onClick:b,className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"M\xe9gse"}),(0,d.jsx)("button",{type:"button",onClick:()=>{t&&c(t.path.startsWith("/")?t.path:`/${t.path}`)},disabled:!t,className:"px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors font-medium",children:"Kiv\xe1laszt\xe1s"})]})]})]})}):null}}};