(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3709],{532:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(1847).A)("eye-off",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]])},1169:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(1847).A)("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]])},1190:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(1847).A)("pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]])},1360:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(1847).A)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]])},1420:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>N});var a=s(5155),r=s(2115),l=s(6199),n=s(1847);let i=(0,n.A)("shield-alert",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]]),c=(0,n.A)("shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]),d=(0,n.A)("user-cog",[["path",{d:"M10 15H6a4 4 0 0 0-4 4v2",key:"1nfge6"}],["path",{d:"m14.305 16.53.923-.382",key:"1itpsq"}],["path",{d:"m15.228 13.852-.923-.383",key:"eplpkm"}],["path",{d:"m16.852 12.228-.383-.923",key:"13v3q0"}],["path",{d:"m16.852 17.772-.383.924",key:"1i8mnm"}],["path",{d:"m19.148 12.228.383-.923",key:"1q8j1v"}],["path",{d:"m19.53 18.696-.382-.924",key:"vk1qj3"}],["path",{d:"m20.772 13.852.924-.383",key:"n880s0"}],["path",{d:"m20.772 16.148.924.383",key:"1g6xey"}],["circle",{cx:"18",cy:"15",r:"3",key:"gjjjvw"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]);var o=s(5299),x=s(1169),h=s(6191),m=s(5917),p=s(6132),u=s(5229),y=s(1190),g=s(1360),j=s(532),f=s(7828);let b={SUPER_ADMIN:"Super Admin",ADMIN:"Admin",EDITOR:"Szerkesztő"},k={SUPER_ADMIN:"bg-purple-100 text-purple-700",ADMIN:"bg-blue-100 text-blue-700",EDITOR:"bg-gray-100 text-gray-700"};function N(){var e;let{data:t}=(0,l.wV)(),[s,n]=(0,r.useState)([]),[N,v]=(0,r.useState)(!0),[A,w]=(0,r.useState)(""),[z,M]=(0,r.useState)(""),[S,C]=(0,r.useState)(!1),[E,D]=(0,r.useState)("create"),[I,T]=(0,r.useState)(null),[H,_]=(0,r.useState)(!1),[O,R]=(0,r.useState)(""),[q,P]=(0,r.useState)(""),[U,F]=(0,r.useState)(""),[L,V]=(0,r.useState)("EDITOR"),[J,B]=(0,r.useState)(!0),[G,K]=(0,r.useState)(!1),[Q,W]=(0,r.useState)(null);(0,r.useEffect)(()=>{X()},[]);let X=async()=>{try{v(!0);let e=await fetch("/api/admin/users");if(e.ok){let t=await e.json();n(t)}else 403===e.status?w("Nincs jogosults\xe1god a felhaszn\xe1l\xf3k megtekint\xe9s\xe9hez"):w("Hiba t\xf6rt\xe9nt a felhaszn\xe1l\xf3k bet\xf6lt\xe9se sor\xe1n")}catch(e){w("Hiba t\xf6rt\xe9nt a felhaszn\xe1l\xf3k bet\xf6lt\xe9se sor\xe1n")}finally{v(!1)}},Y=()=>{C(!1),T(null),R(""),P(""),F("")},Z=async e=>{e.preventDefault(),_(!0),w("");try{if("create"===E){let e=await fetch("/api/admin/users",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:O,password:U,name:q,role:L})});if(e.ok)M("Felhaszn\xe1l\xf3 sikeresen l\xe9trehozva!"),Y(),X(),setTimeout(()=>M(""),3e3);else{let t=await e.json();w(t.error||"Hiba t\xf6rt\xe9nt a felhaszn\xe1l\xf3 l\xe9trehoz\xe1sa sor\xe1n")}}else if(I){let e={email:O,name:q,role:L,isActive:J};U&&(e.password=U);let t=await fetch("/api/admin/users/".concat(I.id),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(t.ok)M("Felhaszn\xe1l\xf3 sikeresen friss\xedtve!"),Y(),X(),setTimeout(()=>M(""),3e3);else{let e=await t.json();w(e.error||"Hiba t\xf6rt\xe9nt a felhaszn\xe1l\xf3 friss\xedt\xe9se sor\xe1n")}}}catch(e){w("Hiba t\xf6rt\xe9nt")}finally{_(!1)}},$=async e=>{try{let t=await fetch("/api/admin/users/".concat(e),{method:"DELETE"});if(t.ok)M("Felhaszn\xe1l\xf3 sikeresen t\xf6r\xf6lve!"),W(null),X(),setTimeout(()=>M(""),3e3);else{let e=await t.json();w(e.error||"Hiba t\xf6rt\xe9nt a felhaszn\xe1l\xf3 t\xf6rl\xe9se sor\xe1n")}}catch(e){w("Hiba t\xf6rt\xe9nt a felhaszn\xe1l\xf3 t\xf6rl\xe9se sor\xe1n")}},ee=(null==t||null==(e=t.user)?void 0:e.role)==="SUPER_ADMIN";return N?(0,a.jsx)("div",{className:"flex items-center justify-center min-h-[400px]",children:(0,a.jsx)(o.A,{className:"w-8 h-8 text-orange-500 animate-spin"})}):(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("h1",{className:"text-2xl font-bold text-gray-900 flex items-center gap-2",children:[(0,a.jsx)(x.A,{className:"w-6 h-6 text-orange-600"}),"Felhaszn\xe1l\xf3k"]}),(0,a.jsx)("p",{className:"text-gray-600 mt-1",children:"Admin felhaszn\xe1l\xf3k kezel\xe9se"})]}),ee&&(0,a.jsxs)("button",{onClick:()=>{D("create"),T(null),R(""),P(""),F(""),V("EDITOR"),B(!0),K(!1),C(!0)},className:"flex items-center gap-2 px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 transition-colors",children:[(0,a.jsx)(h.A,{className:"w-4 h-4"}),"\xdaj felhaszn\xe1l\xf3"]})]}),z&&(0,a.jsxs)("div",{className:"p-4 bg-green-50 border border-green-200 rounded-lg text-green-700 flex items-center gap-2",children:[(0,a.jsx)(m.A,{className:"w-5 h-5"}),z]}),A&&(0,a.jsxs)("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg text-red-700 flex items-center gap-2",children:[(0,a.jsx)(p.A,{className:"w-5 h-5"}),A]}),(0,a.jsx)("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:(0,a.jsxs)("table",{className:"w-full",children:[(0,a.jsx)("thead",{className:"bg-gray-50 border-b border-gray-200",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-600",children:"N\xe9v"}),(0,a.jsx)("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-600",children:"Email"}),(0,a.jsx)("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-600",children:"Szerepk\xf6r"}),(0,a.jsx)("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-600",children:"St\xe1tusz"}),(0,a.jsx)("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-600",children:"Utols\xf3 bel\xe9p\xe9s"}),ee&&(0,a.jsx)("th",{className:"px-4 py-3 text-right text-sm font-medium text-gray-600",children:"Műveletek"})]})}),(0,a.jsxs)("tbody",{className:"divide-y divide-gray-200",children:[s.map(e=>{var s,r;return(0,a.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,a.jsx)("td",{className:"px-4 py-3",children:(0,a.jsx)("span",{className:"font-medium text-gray-900",children:e.name})}),(0,a.jsx)("td",{className:"px-4 py-3 text-gray-600",children:e.email}),(0,a.jsx)("td",{className:"px-4 py-3",children:(0,a.jsxs)("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded text-xs font-medium ".concat(k[e.role]),children:[(e=>{switch(e){case"SUPER_ADMIN":return(0,a.jsx)(i,{className:"w-4 h-4"});case"ADMIN":return(0,a.jsx)(c,{className:"w-4 h-4"});default:return(0,a.jsx)(d,{className:"w-4 h-4"})}})(e.role),b[e.role]]})}),(0,a.jsx)("td",{className:"px-4 py-3",children:e.isActive?(0,a.jsxs)("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded bg-green-100 text-green-700 text-xs font-medium",children:[(0,a.jsx)(m.A,{className:"w-3 h-3"}),"Akt\xedv"]}):(0,a.jsxs)("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded bg-red-100 text-red-700 text-xs font-medium",children:[(0,a.jsx)(u.A,{className:"w-3 h-3"}),"Inakt\xedv"]})}),(0,a.jsx)("td",{className:"px-4 py-3 text-sm text-gray-500",children:(r=e.lastLogin)?new Date(r).toLocaleString("hu-HU",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}):"-"}),ee&&(0,a.jsx)("td",{className:"px-4 py-3 text-right",children:(0,a.jsxs)("div",{className:"flex items-center justify-end gap-2",children:[(0,a.jsx)("button",{onClick:()=>{D("edit"),T(e),R(e.email),P(e.name),F(""),V(e.role),B(e.isActive),K(!1),C(!0)},className:"p-1 text-gray-400 hover:text-orange-600 transition-colors",title:"Szerkeszt\xe9s",children:(0,a.jsx)(y.A,{className:"w-4 h-4"})}),(null==t||null==(s=t.user)?void 0:s.email)!==e.email&&(0,a.jsx)(a.Fragment,{children:Q===e.id?(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)("button",{onClick:()=>$(e.id),className:"p-1 text-red-600 hover:text-red-700",title:"Megerős\xedt\xe9s",children:(0,a.jsx)(m.A,{className:"w-4 h-4"})}),(0,a.jsx)("button",{onClick:()=>W(null),className:"p-1 text-gray-400 hover:text-gray-600",title:"M\xe9gsem",children:(0,a.jsx)(u.A,{className:"w-4 h-4"})})]}):(0,a.jsx)("button",{onClick:()=>W(e.id),className:"p-1 text-gray-400 hover:text-red-600 transition-colors",title:"T\xf6rl\xe9s",children:(0,a.jsx)(g.A,{className:"w-4 h-4"})})})]})})]},e.id)}),0===s.length&&(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:ee?6:5,className:"px-4 py-8 text-center text-gray-500",children:"Nincsenek felhaszn\xe1l\xf3k"})})]})]})}),S&&(0,a.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md",children:[(0,a.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,a.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"create"===E?"\xdaj felhaszn\xe1l\xf3":"Felhaszn\xe1l\xf3 szerkeszt\xe9se"})}),(0,a.jsxs)("form",{onSubmit:Z,children:[(0,a.jsxs)("div",{className:"px-6 py-4 space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"N\xe9v *"}),(0,a.jsx)("input",{type:"text",value:q,onChange:e=>P(e.target.value),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email *"}),(0,a.jsx)("input",{type:"email",value:O,onChange:e=>R(e.target.value),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent"})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Jelsz\xf3 ","create"===E?"*":"(hagyja \xfcresen ha nem v\xe1ltoztatja)"]}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("input",{type:G?"text":"password",value:U,onChange:e=>F(e.target.value),required:"create"===E,minLength:8,className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent"}),(0,a.jsx)("button",{type:"button",onClick:()=>K(!G),className:"absolute right-2 top-1/2 -translate-y-1/2 p-1 text-gray-400 hover:text-gray-600",children:G?(0,a.jsx)(j.A,{className:"w-4 h-4"}):(0,a.jsx)(f.A,{className:"w-4 h-4"})})]}),"create"===E&&(0,a.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:"Minimum 8 karakter"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Szerepk\xf6r"}),(0,a.jsxs)("select",{value:L,onChange:e=>V(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[(0,a.jsx)("option",{value:"EDITOR",children:"Szerkesztő"}),(0,a.jsx)("option",{value:"ADMIN",children:"Admin"}),(0,a.jsx)("option",{value:"SUPER_ADMIN",children:"Super Admin"})]})]}),"edit"===E&&(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("input",{type:"checkbox",id:"isActive",checked:J,onChange:e=>B(e.target.checked),className:"w-4 h-4 text-orange-600 border-gray-300 rounded focus:ring-orange-500"}),(0,a.jsx)("label",{htmlFor:"isActive",className:"text-sm font-medium text-gray-700",children:"Akt\xedv felhaszn\xe1l\xf3"})]})]}),(0,a.jsxs)("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200 flex justify-end gap-3",children:[(0,a.jsx)("button",{type:"button",onClick:Y,className:"px-4 py-2 text-gray-700 hover:text-gray-900 transition-colors",children:"M\xe9gsem"}),(0,a.jsxs)("button",{type:"submit",disabled:H,className:"flex items-center gap-2 px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 transition-colors disabled:opacity-50",children:[H?(0,a.jsx)(o.A,{className:"w-4 h-4 animate-spin"}):(0,a.jsx)(m.A,{className:"w-4 h-4"}),"create"===E?"L\xe9trehoz\xe1s":"Ment\xe9s"]})]})]})]})})]})}},1615:(e,t,s)=>{Promise.resolve().then(s.bind(s,1420))},5229:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(1847).A)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},5917:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(1847).A)("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},6132:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(1847).A)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},6191:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(1847).A)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},7828:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(1847).A)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])}},e=>{e.O(0,[8941,8441,1255,7358],()=>e(e.s=1615)),_N_E=e.O()}]);