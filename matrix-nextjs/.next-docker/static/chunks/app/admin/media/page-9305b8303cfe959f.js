(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7709],{1360:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(1847).A)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]])},1786:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(1847).A)("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]])},1847:(e,t,a)=>{"use strict";a.d(t,{A:()=>o});var r=a(2115);let l=e=>{let t=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,a)=>a?a.toUpperCase():t.toLowerCase());return t.charAt(0).toUpperCase()+t.slice(1)},s=function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return t.filter((e,t,a)=>!!e&&""!==e.trim()&&a.indexOf(e)===t).join(" ").trim()};var i={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let n=(0,r.forwardRef)((e,t)=>{let{color:a="currentColor",size:l=24,strokeWidth:n=2,absoluteStrokeWidth:o,className:c="",children:d,iconNode:u,...h}=e;return(0,r.createElement)("svg",{ref:t,...i,width:l,height:l,stroke:a,strokeWidth:o?24*Number(n)/Number(l):n,className:s("lucide",c),...!d&&!(e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0})(h)&&{"aria-hidden":"true"},...h},[...u.map(e=>{let[t,a]=e;return(0,r.createElement)(t,a)}),...Array.isArray(d)?d:[d]])}),o=(e,t)=>{let a=(0,r.forwardRef)((a,i)=>{let{className:o,...c}=a;return(0,r.createElement)(n,{ref:i,iconNode:t,className:s("lucide-".concat(l(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()),"lucide-".concat(e),o),...c})});return a.displayName=l(e),a}},3011:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"useMergedRef",{enumerable:!0,get:function(){return l}});let r=a(2115);function l(e,t){let a=(0,r.useRef)(null),l=(0,r.useRef)(null);return(0,r.useCallback)(r=>{if(null===r){let e=a.current;e&&(a.current=null,e());let t=l.current;t&&(l.current=null,t())}else e&&(a.current=s(e,r)),t&&(l.current=s(t,r))},[e,t])}function s(e,t){if("function"!=typeof e)return e.current=t,()=>{e.current=null};{let a=e(t);return"function"==typeof a?a:()=>e(null)}}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},3709:(e,t,a)=>{Promise.resolve().then(a.bind(a,4202))},4202:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>y});var r=a(5155),l=a(2115),s=a(5299),i=a(1786),n=a(6651),o=a(6955),c=a(8734),d=a(5239),u=a(5917),h=a(7828);let m=(0,a(1847).A)("copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);var p=a(1360),g=a(5229);function x(e){if(0===e)return"0 B";let t=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,t)).toFixed(2))+" "+["B","KB","MB","GB"][t]}function f(e){let{media:t,onDelete:a,onSelect:s,selectable:i=!1,selectedIds:n=[]}=e,[o,c]=(0,l.useState)(null),[f,y]=(0,l.useState)(null),[j,b]=(0,l.useState)(null),v=async e=>{try{await navigator.clipboard.writeText(e.path),b(e.id),setTimeout(()=>b(null),2e3)}catch(e){console.error("Failed to copy URL:",e)}};return 0===t.length?(0,r.jsxs)("div",{className:"text-center py-12",children:[(0,r.jsx)("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-gray-100 mb-4",children:(0,r.jsx)("svg",{className:"w-8 h-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Nincs felt\xf6lt\xf6tt f\xe1jl"}),(0,r.jsx)("p",{className:"text-gray-500",children:"T\xf6ltsd fel az első f\xe1jlt a fenti gombbal."})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-4",children:t.map(e=>{let t=n.includes(e.id),l=e.mimeType.startsWith("image/");return(0,r.jsxs)("div",{className:"group relative rounded-lg border-2 transition-all overflow-hidden ".concat(t?"border-orange-500 ring-2 ring-orange-500/20":"border-gray-200 hover:border-gray-300"," ").concat(i?"cursor-pointer":""),onClick:()=>i&&(null==s?void 0:s(e)),children:[(0,r.jsxs)("div",{className:"aspect-square relative bg-gray-100",children:[l?(0,r.jsx)(d.default,{src:"/".concat(e.thumbnailPath||e.path),alt:e.alt||e.originalName,fill:!0,className:"object-cover",sizes:"(max-width: 640px) 50vw, (max-width: 768px) 33vw, (max-width: 1024px) 25vw, 16vw"}):(0,r.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,r.jsx)("svg",{className:"w-12 h-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),i&&t&&(0,r.jsx)("div",{className:"absolute top-2 right-2 w-6 h-6 rounded-full bg-orange-500 flex items-center justify-center",children:(0,r.jsx)(u.A,{className:"w-4 h-4 text-white"})}),(0,r.jsxs)("div",{className:"absolute inset-0 bg-black/60 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center gap-2",children:[(0,r.jsx)("button",{type:"button",onClick:t=>{t.stopPropagation(),c(e)},className:"p-2 rounded-full bg-white/20 hover:bg-white/30 transition-colors text-white",title:"Előn\xe9zet",children:(0,r.jsx)(h.A,{className:"w-4 h-4"})}),(0,r.jsx)("button",{type:"button",onClick:t=>{t.stopPropagation(),v(e)},className:"p-2 rounded-full bg-white/20 hover:bg-white/30 transition-colors text-white",title:"URL m\xe1sol\xe1s",children:j===e.id?(0,r.jsx)(u.A,{className:"w-4 h-4"}):(0,r.jsx)(m,{className:"w-4 h-4"})}),(0,r.jsx)("button",{type:"button",onClick:t=>{var r;t.stopPropagation(),f===(r=e.id)?(a(r),y(null)):(y(r),setTimeout(()=>y(null),3e3))},className:"p-2 rounded-full transition-colors text-white ".concat(f===e.id?"bg-red-500 hover:bg-red-600":"bg-white/20 hover:bg-red-500"),title:f===e.id?"Kattints \xfajra a t\xf6rl\xe9shez":"T\xf6rl\xe9s",children:(0,r.jsx)(p.A,{className:"w-4 h-4"})})]})]}),(0,r.jsxs)("div",{className:"p-2 bg-white",children:[(0,r.jsx)("p",{className:"text-xs font-medium text-gray-700 truncate",title:e.originalName,children:e.originalName}),(0,r.jsx)("p",{className:"text-xs text-gray-500",children:x(e.size)})]})]},e.id)})}),o&&(0,r.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/80",onClick:()=>c(null),children:(0,r.jsxs)("div",{className:"relative max-w-4xl max-h-[90vh] bg-white rounded-lg overflow-hidden",onClick:e=>e.stopPropagation(),children:[(0,r.jsx)("button",{type:"button",onClick:()=>c(null),className:"absolute top-2 right-2 z-10 p-2 rounded-full bg-black/50 hover:bg-black/70 text-white transition-colors",children:(0,r.jsx)(g.A,{className:"w-5 h-5"})}),o.mimeType.startsWith("image/")&&(0,r.jsx)("div",{className:"relative",children:(0,r.jsx)("img",{src:"/".concat(o.path),alt:o.alt||o.originalName,className:"max-w-full max-h-[70vh] object-contain"})}),(0,r.jsxs)("div",{className:"p-4 border-t border-gray-200",children:[(0,r.jsx)("h3",{className:"font-medium text-gray-900 mb-2",children:o.originalName}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"text-gray-500",children:"M\xe9ret:"})," ",(0,r.jsx)("span",{className:"text-gray-700",children:x(o.size)})]}),o.width&&o.height&&(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"text-gray-500",children:"Felbont\xe1s:"})," ",(0,r.jsxs)("span",{className:"text-gray-700",children:[o.width," \xd7 ",o.height]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"text-gray-500",children:"T\xedpus:"})," ",(0,r.jsx)("span",{className:"text-gray-700",children:o.mimeType})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"text-gray-500",children:"Felt\xf6ltve:"})," ",(0,r.jsx)("span",{className:"text-gray-700",children:new Date(o.createdAt).toLocaleDateString("hu-HU",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})})]})]}),(0,r.jsxs)("div",{className:"mt-3",children:[(0,r.jsx)("label",{className:"block text-sm text-gray-500 mb-1",children:"URL:"}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("input",{type:"text",value:o.path,readOnly:!0,className:"flex-1 px-3 py-2 text-sm bg-gray-50 border border-gray-200 rounded-lg"}),(0,r.jsx)("button",{type:"button",onClick:()=>v(o),className:"px-3 py-2 bg-orange-500 text-white rounded-lg hover:bg-orange-600 transition-colors text-sm font-medium",children:j===o.id?"M\xe1solva!":"M\xe1sol\xe1s"})]})]})]})]})})]})}function y(){let[e,t]=(0,l.useState)([]),[a,d]=(0,l.useState)(!0),[u,h]=(0,l.useState)(!1),[m,p]=(0,l.useState)(""),[g,x]=(0,l.useState)("all"),[y,j]=(0,l.useState)("all"),[b,v]=(0,l.useState)({page:1,limit:24,total:0,totalPages:1});(0,l.useEffect)(()=>{w()},[m,g,y,b.page]);let w=async()=>{d(!0);try{let e=new URLSearchParams({page:String(b.page),limit:String(b.limit)});"all"!==g&&e.append("mimeType",g),"all"!==y&&e.append("folder",y),m&&e.append("search",m);let a=await fetch("/api/admin/media?".concat(e)),r=await a.json();r.media&&(t(r.media),v(r.pagination))}catch(e){console.error("Failed to fetch media:",e)}finally{d(!1)}},N=async e=>{let t=e.target.files;if(t&&0!==t.length){h(!0);try{for(let e of Array.from(t)){let t=new FormData;t.append("file",e),t.append("folder","all"===y?"general":y);let a=await fetch("/api/admin/media/upload/",{method:"POST",body:t}),r=await a.json();r.success||alert("Hiba a f\xe1jl felt\xf6lt\xe9sekor: ".concat(e.name,"\n").concat(r.error))}await w(),e.target.value=""}catch(e){console.error("Upload failed:",e),alert("Hiba t\xf6rt\xe9nt a felt\xf6lt\xe9s sor\xe1n")}finally{h(!1)}}},k=async e=>{try{let a=await fetch("/api/admin/media?id=".concat(e),{method:"DELETE"}),r=await a.json();r.success?t(t=>t.filter(t=>t.id!==e)):alert(r.error||"Hiba t\xf6rt\xe9nt a t\xf6rl\xe9s sor\xe1n")}catch(e){console.error("Delete failed:",e),alert("Hiba t\xf6rt\xe9nt a t\xf6rl\xe9s sor\xe1n")}},A=e=>{v(t=>({...t,page:e}))};return(0,r.jsx)("div",{className:"min-h-screen bg-gray-50 p-6",children:(0,r.jsxs)("div",{className:"max-w-7xl mx-auto space-y-6",children:[(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"M\xe9diat\xe1r"}),(0,r.jsx)("p",{className:"text-gray-600 mt-2",children:"Felt\xf6lt\xf6tt k\xe9pek \xe9s f\xe1jlok kezel\xe9se"})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6 space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("label",{className:"relative",children:[(0,r.jsx)("input",{type:"file",accept:"image/*",multiple:!0,onChange:N,disabled:u,className:"hidden"}),(0,r.jsx)("button",{type:"button",disabled:u,className:"flex items-center gap-2 px-6 py-3 bg-orange-600 text-white rounded-lg hover:bg-orange-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors font-medium",children:u?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.A,{className:"w-5 h-5 animate-spin"}),"Felt\xf6lt\xe9s folyamatban..."]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i.A,{className:"w-5 h-5"}),"\xdaj f\xe1jl felt\xf6lt\xe9se"]})})]}),(0,r.jsxs)("div",{className:"text-sm text-gray-500",children:["\xd6sszesen: ",b.total," f\xe1jl"]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(n.A,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),(0,r.jsx)("input",{type:"text",value:m,onChange:e=>{p(e.target.value),v(e=>({...e,page:1}))},placeholder:"Keres\xe9s...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent"})]}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(o.A,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),(0,r.jsxs)("select",{value:g,onChange:e=>{x(e.target.value),v(e=>({...e,page:1}))},className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent appearance-none bg-white",children:[(0,r.jsx)("option",{value:"all",children:"Minden f\xe1jlt\xedpus"}),(0,r.jsx)("option",{value:"image",children:"K\xe9pek"})]})]}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(c.A,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),(0,r.jsxs)("select",{value:y,onChange:e=>{j(e.target.value),v(e=>({...e,page:1}))},className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent appearance-none bg-white",children:[(0,r.jsx)("option",{value:"all",children:"Minden mappa"}),(0,r.jsx)("option",{value:"general",children:"\xc1ltal\xe1nos"}),(0,r.jsx)("option",{value:"uploads",children:"Felt\xf6lt\xe9sek"})]})]})]})]}),(0,r.jsx)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:a?(0,r.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,r.jsx)(s.A,{className:"w-8 h-8 animate-spin text-orange-600"})}):(0,r.jsx)(f,{media:e,onDelete:k})}),b.totalPages>1&&(0,r.jsx)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:(0,r.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,r.jsx)("button",{onClick:()=>A(b.page-1),disabled:1===b.page,className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Előző"}),(0,r.jsxs)("span",{className:"px-4 py-2 text-gray-700",children:[b.page," / ",b.totalPages]}),(0,r.jsx)("button",{onClick:()=>A(b.page+1),disabled:b.page===b.totalPages,className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"K\xf6vetkező"})]})})]})})}},4652:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var a in t)Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}(t,{default:function(){return o},getImageProps:function(){return n}});let r=a(8140),l=a(5040),s=a(1356),i=r._(a(1124));function n(e){let{props:t}=(0,l.getImgProps)(e,{defaultLoader:i.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image/",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!0}});for(let[e,a]of Object.entries(t))void 0===a&&delete t[e];return{props:t}}let o=s.Image},5229:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(1847).A)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},5239:(e,t,a)=>{"use strict";a.d(t,{default:()=>l.a});var r=a(4652),l=a.n(r)},5299:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(1847).A)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},5917:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(1847).A)("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},6651:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(1847).A)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]])},6955:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(1847).A)("funnel",[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]])},7828:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(1847).A)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},8734:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(1847).A)("folder-open",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]])}},e=>{e.O(0,[1356,8441,1255,7358],()=>e(e.s=3709)),_N_E=e.O()}]);