(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6543],{1360:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(1847).A)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]])},1375:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(1847).A)("archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]])},1847:(e,t,a)=>{"use strict";a.d(t,{A:()=>c});var s=a(2115);let r=e=>{let t=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,a)=>a?a.toUpperCase():t.toLowerCase());return t.charAt(0).toUpperCase()+t.slice(1)},i=function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return t.filter((e,t,a)=>!!e&&""!==e.trim()&&a.indexOf(e)===t).join(" ").trim()};var l={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let n=(0,s.forwardRef)((e,t)=>{let{color:a="currentColor",size:r=24,strokeWidth:n=2,absoluteStrokeWidth:c,className:d="",children:o,iconNode:h,...m}=e;return(0,s.createElement)("svg",{ref:t,...l,width:r,height:r,stroke:a,strokeWidth:c?24*Number(n)/Number(r):n,className:i("lucide",d),...!o&&!(e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0})(m)&&{"aria-hidden":"true"},...m},[...h.map(e=>{let[t,a]=e;return(0,s.createElement)(t,a)}),...Array.isArray(o)?o:[o]])}),c=(e,t)=>{let a=(0,s.forwardRef)((a,l)=>{let{className:c,...d}=a;return(0,s.createElement)(n,{ref:l,iconNode:t,className:i("lucide-".concat(r(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()),"lucide-".concat(e),c),...d})});return a.displayName=r(e),a}},1955:(e,t,a)=>{Promise.resolve().then(a.bind(a,5048))},2108:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(1847).A)("chevron-up",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]])},4033:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(1847).A)("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]])},5048:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>j});var s=a(5155),r=a(2115),i=a(5229),l=a(6651),n=a(1847);let c=(0,n.A)("mail",[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]]),d=(0,n.A)("mail-open",[["path",{d:"M21.2 8.4c.5.38.8.97.8 1.6v10a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V10a2 2 0 0 1 .8-1.6l8-6a2 2 0 0 1 2.4 0l8 6Z",key:"1jhwl8"}],["path",{d:"m22 10-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 10",key:"1qfld7"}]]);var o=a(6983);let h=(0,n.A)("phone",[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]]);var m=a(1375),x=a(1360),g=a(2108),p=a(4033);let y=(0,n.A)("map-pin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]),u=(0,n.A)("monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]);function j(){let[e,t]=(0,r.useState)([]),[a,n]=(0,r.useState)(!0),[j,v]=(0,r.useState)(null),[b,f]=(0,r.useState)("all"),[N,w]=(0,r.useState)(""),[k,A]=(0,r.useState)(""),[z,C]=(0,r.useState)({page:1,limit:20,total:0,totalPages:0}),[E,M]=(0,r.useState)(null),[S,R]=(0,r.useState)(null);(0,r.useEffect)(()=>{L()},[b,N,z.page]);let L=async()=>{try{n(!0);let e=new URLSearchParams({filter:b,search:N,page:z.page.toString(),limit:z.limit.toString()}),a=await fetch("/api/admin/messages?".concat(e));if(!a.ok)throw Error("Hiba az \xfczenetek bet\xf6lt\xe9sekor");let s=await a.json();t(s.messages),C(s.pagination)}catch(e){v(e instanceof Error?e.message:"Ismeretlen hiba")}finally{n(!1)}},P=async e=>{if(E===e){M(null),R(null);return}try{let a=await fetch("/api/admin/messages/".concat(e));if(!a.ok)throw Error("Hiba az \xfczenet bet\xf6lt\xe9sekor");let s=await a.json();M(e),R(s),t(t=>t.map(t=>t.id===e?{...t,isRead:!0}:t))}catch(e){v(e instanceof Error?e.message:"Ismeretlen hiba")}},T=async(e,a)=>{try{if(!(await fetch("/api/admin/messages/".concat(e),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({isRead:!a})})).ok)throw Error("Hiba t\xf6rt\xe9nt");t(t=>t.map(t=>t.id===e?{...t,isRead:!a}:t)),S&&S.id===e&&R({...S,isRead:!a})}catch(e){v(e instanceof Error?e.message:"Ismeretlen hiba")}},H=async(e,t)=>{try{if(!(await fetch("/api/admin/messages/".concat(e),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({isArchived:!t})})).ok)throw Error("Hiba t\xf6rt\xe9nt");await L()}catch(e){v(e instanceof Error?e.message:"Ismeretlen hiba")}},_=async e=>{if(confirm("Biztosan t\xf6r\xf6lni szeretn\xe9d ezt az \xfczenetet?"))try{if(!(await fetch("/api/admin/messages/".concat(e),{method:"DELETE"})).ok)throw Error("Hiba t\xf6rt\xe9nt");E===e&&(M(null),R(null)),await L()}catch(e){v(e instanceof Error?e.message:"Ismeretlen hiba")}};return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsx)("div",{className:"flex items-center justify-between",children:(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"\xdczenetek"}),(0,s.jsx)("p",{className:"text-gray-600",children:"Kapcsolati űrlapr\xf3l \xe9rkezett \xfczenetek"})]})}),j&&(0,s.jsxs)("div",{className:"px-4 py-3 bg-red-50 text-red-700 rounded-lg flex justify-between items-center",children:[(0,s.jsx)("span",{children:j}),(0,s.jsx)("button",{onClick:()=>v(null),children:(0,s.jsx)(i.A,{className:"w-4 h-4"})})]}),(0,s.jsx)("div",{className:"bg-white rounded-lg shadow p-4",children:(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("button",{onClick:()=>{f("all"),C(e=>({...e,page:1}))},className:"px-4 py-2 rounded-lg text-sm font-medium transition ".concat("all"===b?"bg-orange-500 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:"\xd6sszes"}),(0,s.jsx)("button",{onClick:()=>{f("unread"),C(e=>({...e,page:1}))},className:"px-4 py-2 rounded-lg text-sm font-medium transition ".concat("unread"===b?"bg-orange-500 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:"Olvasatlan"}),(0,s.jsx)("button",{onClick:()=>{f("archived"),C(e=>({...e,page:1}))},className:"px-4 py-2 rounded-lg text-sm font-medium transition ".concat("archived"===b?"bg-orange-500 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:"Archiv\xe1lt"})]}),(0,s.jsxs)("form",{onSubmit:e=>{e.preventDefault(),w(k),C(e=>({...e,page:1}))},className:"flex-1 flex gap-2",children:[(0,s.jsxs)("div",{className:"relative flex-1",children:[(0,s.jsx)(l.A,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),(0,s.jsx)("input",{type:"text",value:k,onChange:e=>A(e.target.value),placeholder:"Keres\xe9s n\xe9v vagy email alapj\xe1n...",className:"w-full pl-10 pr-10 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent"}),k&&(0,s.jsx)("button",{type:"button",onClick:()=>{A(""),w(""),C(e=>({...e,page:1}))},className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:(0,s.jsx)(i.A,{className:"w-4 h-4"})})]}),(0,s.jsx)("button",{type:"submit",className:"px-4 py-2 bg-orange-500 text-white rounded-lg hover:bg-orange-600 transition",children:"Keres\xe9s"})]})]})}),(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow",children:[a?(0,s.jsx)("div",{className:"flex items-center justify-center p-8",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-orange-500"})}):0===e.length?(0,s.jsxs)("div",{className:"px-6 py-12 text-center text-gray-500",children:[(0,s.jsx)(c,{className:"w-12 h-12 mx-auto mb-3 text-gray-400"}),(0,s.jsx)("p",{className:"text-lg",children:"Nincsenek \xfczenetek"}),(0,s.jsx)("p",{className:"text-sm mt-1",children:"unread"===b?"Minden \xfczenet el van olvasva":"archived"===b?"Nincsenek archiv\xe1lt \xfczenetek":N?"Nincs tal\xe1lat":"M\xe9g nem \xe9rkezett \xfczenet"})]}):(0,s.jsx)("div",{className:"divide-y divide-gray-200",children:e.map(e=>(0,s.jsxs)("div",{className:"hover:bg-gray-50 transition",children:[(0,s.jsx)("div",{className:"px-6 py-4",children:(0,s.jsxs)("div",{className:"flex items-start gap-4",children:[(0,s.jsx)("button",{onClick:()=>T(e.id,e.isRead),className:"mt-1 text-gray-400 hover:text-orange-500 transition",children:e.isRead?(0,s.jsx)(d,{className:"w-5 h-5"}):(0,s.jsx)(c,{className:"w-5 h-5 text-orange-500"})}),(0,s.jsx)("div",{className:"flex-1 min-w-0",children:(0,s.jsxs)("div",{className:"flex items-start justify-between gap-4",children:[(0,s.jsxs)("button",{onClick:()=>P(e.id),className:"flex-1 text-left",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("h3",{className:"text-sm font-medium ".concat(e.isRead?"text-gray-700":"text-gray-900 font-semibold"),children:e.name}),(0,s.jsxs)("span",{className:"text-sm text-gray-500",children:["<",e.email,">"]})]}),(0,s.jsx)("p",{className:"text-sm text-gray-600 mt-1 line-clamp-2",children:e.message}),(0,s.jsxs)("div",{className:"flex items-center gap-3 mt-2",children:[(0,s.jsxs)("span",{className:"text-xs text-gray-500 flex items-center gap-1",children:[(0,s.jsx)(o.A,{className:"w-3 h-3"}),(e=>{let t=new Date(e),a=new Date().getTime()-t.getTime(),s=Math.floor(a/6e4),r=Math.floor(a/36e5),i=Math.floor(a/864e5);return s<1?"Most":s<60?"".concat(s," perce"):r<24?"".concat(r," \xf3r\xe1ja"):i<7?"".concat(i," napja"):t.toLocaleDateString("hu-HU",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})})(e.createdAt)]}),e.phone&&(0,s.jsxs)("span",{className:"text-xs text-gray-500 flex items-center gap-1",children:[(0,s.jsx)(h,{className:"w-3 h-3"}),e.phone]})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("button",{onClick:()=>H(e.id,e.isArchived),className:"p-2 text-gray-400 hover:text-blue-500 transition",title:e.isArchived?"Archiv\xe1l\xe1s visszavon\xe1sa":"Archiv\xe1l\xe1s",children:(0,s.jsx)(m.A,{className:"w-4 h-4"})}),(0,s.jsx)("button",{onClick:()=>_(e.id),className:"p-2 text-gray-400 hover:text-red-500 transition",title:"T\xf6rl\xe9s",children:(0,s.jsx)(x.A,{className:"w-4 h-4"})}),(0,s.jsx)("button",{onClick:()=>P(e.id),className:"p-2 text-gray-400 hover:text-gray-600 transition",children:E===e.id?(0,s.jsx)(g.A,{className:"w-4 h-4"}):(0,s.jsx)(p.A,{className:"w-4 h-4"})})]})]})})]})}),E===e.id&&S&&(0,s.jsx)("div",{className:"px-6 pb-4 bg-gray-50 border-t border-gray-200",children:(0,s.jsxs)("div",{className:"max-w-4xl",children:[(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Teljes \xfczenet:"}),(0,s.jsx)("div",{className:"bg-white rounded-lg p-4 text-sm text-gray-700 whitespace-pre-wrap border border-gray-200",children:S.message})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[S.ipAddress&&(0,s.jsxs)("div",{className:"flex items-center gap-2 text-gray-600",children:[(0,s.jsx)(y,{className:"w-4 h-4 text-gray-400"}),(0,s.jsx)("span",{className:"font-medium",children:"IP:"}),(0,s.jsx)("span",{children:S.ipAddress})]}),S.userAgent&&(0,s.jsxs)("div",{className:"flex items-start gap-2 text-gray-600",children:[(0,s.jsx)(u,{className:"w-4 h-4 text-gray-400 mt-0.5"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"font-medium",children:"B\xf6ng\xe9sző:"}),(0,s.jsx)("p",{className:"text-xs text-gray-500 mt-1 break-all",children:S.userAgent})]})]})]})]})})]},e.id))}),!a&&z.totalPages>1&&(0,s.jsxs)("div",{className:"px-6 py-4 border-t border-gray-200 flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"text-sm text-gray-600",children:[z.total," \xfczenet, ",z.page,". oldal / ",z.totalPages]}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("button",{onClick:()=>C(e=>({...e,page:e.page-1})),disabled:1===z.page,className:"px-3 py-1 text-sm border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition",children:"Előző"}),(0,s.jsx)("button",{onClick:()=>C(e=>({...e,page:e.page+1})),disabled:z.page===z.totalPages,className:"px-3 py-1 text-sm border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition",children:"K\xf6vetkező"})]})]})]})]})}},5229:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(1847).A)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},6651:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(1847).A)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]])},6983:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(1847).A)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]])}},e=>{e.O(0,[8441,1255,7358],()=>e(e.s=1955)),_N_E=e.O()}]);