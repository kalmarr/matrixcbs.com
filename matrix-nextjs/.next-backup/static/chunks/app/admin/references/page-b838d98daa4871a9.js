(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7669],{532:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(1847).A)("eye-off",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]])},1360:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(1847).A)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]])},2777:(e,t,r)=>{Promise.resolve().then(r.bind(r,7083))},3011:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"useMergedRef",{enumerable:!0,get:function(){return s}});let a=r(2115);function s(e,t){let r=(0,a.useRef)(null),s=(0,a.useRef)(null);return(0,a.useCallback)(a=>{if(null===a){let e=r.current;e&&(r.current=null,e());let t=s.current;t&&(s.current=null,t())}else e&&(r.current=l(e,a)),t&&(s.current=l(t,a))},[e,t])}function l(e,t){if("function"!=typeof e)return e.current=t,()=>{e.current=null};{let r=e(t);return"function"==typeof r?r:()=>e(null)}}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},7083:(e,t,r)=>{"use strict";r.d(t,{default:()=>w});var a=r(5155),s=r(2115),l=r(5299),n=r(6191),i=r(9347),o=r(1847);let c=(0,o.A)("star-off",[["path",{d:"M8.34 8.34 2 9.27l5 4.87L5.82 21 12 17.77 18.18 21l-.59-3.43",key:"16m0ql"}],["path",{d:"M18.42 12.76 22 9.27l-6.91-1L12 2l-1.44 2.91",key:"1vt8nq"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);var d=r(7828),m=r(532);let u=(0,o.A)("pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);var g=r(1360),h=r(5239),x=r(6980),b=r.n(x),p=r(5626),y=r(5229),f=r(2196),j=r(6046),v=r(5713),N=r(744);function k(e){var t;let{reference:r,onSubmit:n,onCancel:i}=e,[o,c]=(0,s.useState)(!1),[d,m]=(0,s.useState)(""),[u,g]=(0,s.useState)(!1),[x,b]=(0,s.useState)((null==r?void 0:r.companyName)||""),[k,w]=(0,s.useState)((null==r?void 0:r.contactName)||""),[A,C]=(0,s.useState)((null==r?void 0:r.contactRole)||""),[S,M]=(0,s.useState)((null==r?void 0:r.testimonial)||""),[z,E]=(0,s.useState)((null==r?void 0:r.logoPath)||""),[O,P]=(0,s.useState)((null==r?void 0:r.websiteUrl)||""),[L,_]=(0,s.useState)((null==r?void 0:r.featured)||!1),[T,R]=(0,s.useState)((null==r?void 0:r.sortOrder)||0),[U,H]=(0,s.useState)(null==(t=null==r?void 0:r.isActive)||t),K=async e=>{if(e.preventDefault(),m(""),!x.trim())return void m("A c\xe9gn\xe9v megad\xe1sa k\xf6telező");if(!S.trim()||"<p></p>"===S)return void m("A v\xe9lem\xe9ny megad\xe1sa k\xf6telező");c(!0);try{await n({companyName:x.trim(),contactName:k.trim()||null,contactRole:A.trim()||null,testimonial:S.trim(),logoPath:z.trim()||null,websiteUrl:O.trim()||null,featured:L,sortOrder:T,isActive:U})}catch(e){m(e instanceof Error?e.message:"Hiba t\xf6rt\xe9nt a ment\xe9s sor\xe1n")}finally{c(!1)}};return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("button",{type:"button",onClick:i,className:"p-2 hover:bg-gray-200 rounded-lg transition",children:(0,a.jsx)(p.A,{className:"w-5 h-5"})}),(0,a.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:r?"Referencia szerkeszt\xe9se":"\xdaj referencia"})]}),d&&(0,a.jsx)("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg text-red-700",children:d}),(0,a.jsxs)("form",{onSubmit:K,className:"space-y-6",children:[(0,a.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-6 space-y-4",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Alapadatok"}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{htmlFor:"companyName",className:"block text-sm font-medium text-gray-700 mb-1",children:["C\xe9gn\xe9v ",(0,a.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,a.jsx)("input",{type:"text",id:"companyName",value:x,onChange:e=>b(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"Pl. ABC Kft.",required:!0})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"contactName",className:"block text-sm font-medium text-gray-700 mb-1",children:"Kapcsolattart\xf3 neve"}),(0,a.jsx)("input",{type:"text",id:"contactName",value:k,onChange:e=>w(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"Pl. Kov\xe1cs J\xe1nos"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"contactRole",className:"block text-sm font-medium text-gray-700 mb-1",children:"Poz\xedci\xf3"}),(0,a.jsx)("input",{type:"text",id:"contactRole",value:A,onChange:e=>C(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"Pl. \xdcgyvezető igazgat\xf3"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"websiteUrl",className:"block text-sm font-medium text-gray-700 mb-1",children:"Weboldal"}),(0,a.jsx)("input",{type:"url",id:"websiteUrl",value:O,onChange:e=>P(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"https://example.com"})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"C\xe9glog\xf3"}),(0,a.jsxs)("div",{className:"flex items-start gap-4",children:[z?(0,a.jsxs)("div",{className:"relative w-24 h-24 rounded-lg overflow-hidden bg-gray-100 border border-gray-200",children:[(0,a.jsx)(h.default,{src:z,alt:"Logo",fill:!0,className:"object-contain"}),(0,a.jsx)("button",{type:"button",onClick:()=>E(""),className:"absolute top-1 right-1 p-1 bg-red-500 text-white rounded-full hover:bg-red-600 transition-colors",children:(0,a.jsx)(y.A,{className:"w-3 h-3"})})]}):(0,a.jsx)("div",{className:"w-24 h-24 rounded-lg bg-gray-100 border-2 border-dashed border-gray-300 flex items-center justify-center",children:(0,a.jsx)(f.A,{className:"w-8 h-8 text-gray-400"})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("button",{type:"button",onClick:()=>g(!0),className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors text-sm font-medium",children:z?"Logo cser\xe9je":"Logo kiv\xe1laszt\xe1sa"}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-2",children:"Aj\xe1nlott: n\xe9gyzetes k\xe9p, minimum 200x200 pixel"})]})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[(0,a.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:["V\xe9lem\xe9ny ",(0,a.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,a.jsx)(v.A,{content:S,onChange:M,placeholder:"\xcdrd be a v\xe9lem\xe9nyt...",minHeight:"150px",showImageButton:!1})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-6 space-y-4",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Be\xe1ll\xedt\xe1sok"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"sortOrder",className:"block text-sm font-medium text-gray-700 mb-1",children:"Sorrend"}),(0,a.jsx)("input",{type:"number",id:"sortOrder",value:T,onChange:e=>R(parseInt(e.target.value)||0),min:0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent"}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Kisebb sz\xe1m = előr\xe9bb jelenik meg"})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("label",{className:"flex items-center gap-3 cursor-pointer",children:[(0,a.jsx)("input",{type:"checkbox",checked:L,onChange:e=>_(e.target.checked),className:"w-5 h-5 rounded border-gray-300 text-orange-500 focus:ring-orange-500"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Kiemelt"}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"Előr\xe9bb jelenik meg a list\xe1ban"})]})]}),(0,a.jsxs)("label",{className:"flex items-center gap-3 cursor-pointer",children:[(0,a.jsx)("input",{type:"checkbox",checked:U,onChange:e=>H(e.target.checked),className:"w-5 h-5 rounded border-gray-300 text-orange-500 focus:ring-orange-500"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Akt\xedv"}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"Megjelenik a nyilv\xe1nos oldalon"})]})]})]})]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between gap-4 bg-white rounded-lg border border-gray-200 p-6",children:[(0,a.jsx)("button",{type:"button",onClick:i,className:"px-6 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition",disabled:o,children:"M\xe9gse"}),(0,a.jsx)("button",{type:"submit",disabled:o,className:"flex items-center gap-2 px-6 py-2 bg-orange-500 text-white rounded-lg hover:bg-orange-600 transition disabled:opacity-50 disabled:cursor-not-allowed",children:o?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(l.A,{className:"w-4 h-4 animate-spin"}),"Ment\xe9s folyamatban..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(j.A,{className:"w-4 h-4"}),r?"Ment\xe9s":"L\xe9trehoz\xe1s"]})})]})]}),(0,a.jsx)(N.A,{isOpen:u,onClose:()=>g(!1),onSelect:e=>{E(e),g(!1)}})]})}function w(){let[e,t]=(0,s.useState)([]),[r,o]=(0,s.useState)(!0),[x,p]=(0,s.useState)(""),[y,f]=(0,s.useState)(null),[j,v]=(0,s.useState)(!1),[N,w]=(0,s.useState)(null);(0,s.useEffect)(()=>{A()},[]);let A=async()=>{try{let e=await fetch("/api/admin/references");if(e.ok){let r=await e.json();t(r)}else p("Nem siker\xfclt bet\xf6lteni a referenci\xe1kat")}catch(e){console.error("Error fetching references:",e),p("Hiba t\xf6rt\xe9nt a referenci\xe1k bet\xf6lt\xe9se k\xf6zben")}finally{o(!1)}},C=()=>{f(null),v(!0)},S=async r=>{if(N!==r){w(r),setTimeout(()=>w(null),3e3);return}try{let a=await fetch("/api/admin/references/".concat(r),{method:"DELETE"});if(a.ok)t(e.filter(e=>e.id!==r));else{let e=await a.json();p(e.error||"Hiba t\xf6rt\xe9nt a t\xf6rl\xe9s sor\xe1n")}}catch(e){console.error("Error deleting reference:",e),p("Hiba t\xf6rt\xe9nt a t\xf6rl\xe9s sor\xe1n")}finally{w(null)}},M=async r=>{try{let a=await fetch("/api/admin/references/".concat(r.id),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({...r,featured:!r.featured})});if(a.ok){let r=await a.json();t(e.map(e=>e.id===r.id?r:e))}}catch(e){console.error("Error toggling featured:",e)}},z=async r=>{try{let a=await fetch("/api/admin/references/".concat(r.id),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({...r,isActive:!r.isActive})});if(a.ok){let r=await a.json();t(e.map(e=>e.id===r.id?r:e))}}catch(e){console.error("Error toggling active:",e)}},E=async r=>{try{let a;if((a=y?await fetch("/api/admin/references/".concat(y.id),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)}):await fetch("/api/admin/references",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)})).ok){let r=await a.json();y?t(e.map(e=>e.id===r.id?r:e)):t([r,...e]),v(!1),f(null)}else{let e=await a.json();throw Error(e.error||"Hiba t\xf6rt\xe9nt")}}catch(e){throw console.error("Error saving reference:",e),e}};return r?(0,a.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,a.jsx)(l.A,{className:"w-8 h-8 animate-spin text-orange-600"})}):j?(0,a.jsx)(k,{reference:y,onSubmit:E,onCancel:()=>{v(!1),f(null)}}):(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("p",{className:"text-sm text-gray-500",children:[e.length," referencia",(e.length,"")]}),(0,a.jsxs)("button",{type:"button",onClick:C,className:"flex items-center gap-2 px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 transition-colors font-medium",children:[(0,a.jsx)(n.A,{className:"w-4 h-4"}),"\xdaj referencia"]})]}),x&&(0,a.jsx)("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg text-red-700",children:x}),0===e.length?(0,a.jsxs)("div",{className:"text-center py-12 bg-white rounded-lg border border-gray-200",children:[(0,a.jsx)("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-gray-100 mb-4",children:(0,a.jsx)("svg",{className:"w-8 h-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})})}),(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"M\xe9g nincsenek referenci\xe1k"}),(0,a.jsx)("p",{className:"text-gray-500 mb-4",children:"Adj hozz\xe1 \xfcgyf\xe9lv\xe9lem\xe9nyeket \xe9s referenci\xe1kat."}),(0,a.jsxs)("button",{type:"button",onClick:C,className:"inline-flex items-center gap-2 px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 transition-colors font-medium",children:[(0,a.jsx)(n.A,{className:"w-4 h-4"}),"Első referencia hozz\xe1ad\xe1sa"]})]}):(0,a.jsx)("div",{className:"space-y-4",children:e.map(e=>(0,a.jsx)("div",{className:"bg-white rounded-lg border border-gray-200 p-4 ".concat(e.isActive?"":"opacity-60"),children:(0,a.jsxs)("div",{className:"flex items-start gap-4",children:[(0,a.jsx)("div",{className:"flex-shrink-0",children:e.logoPath?(0,a.jsx)("div",{className:"w-16 h-16 rounded-lg overflow-hidden bg-gray-100",children:(0,a.jsx)(h.default,{src:e.logoPath,alt:e.companyName,width:64,height:64,className:"w-full h-full object-contain"})}):(0,a.jsx)("div",{className:"w-16 h-16 rounded-lg bg-gray-100 flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-2xl font-bold text-gray-400",children:e.companyName.charAt(0)})})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:e.companyName}),e.featured&&(0,a.jsx)("span",{className:"px-2 py-0.5 bg-yellow-100 text-yellow-700 text-xs font-medium rounded",children:"Kiemelt"}),!e.isActive&&(0,a.jsx)("span",{className:"px-2 py-0.5 bg-gray-100 text-gray-600 text-xs font-medium rounded",children:"Inakt\xedv"})]}),(e.contactName||e.contactRole)&&(0,a.jsxs)("p",{className:"text-sm text-gray-600 mb-2",children:[e.contactName,e.contactRole&&" - ".concat(e.contactRole)]}),(0,a.jsx)("p",{className:"text-gray-700 text-sm line-clamp-2",children:(e=>{let t=b().sanitize(e,{ALLOWED_TAGS:[]});return t.substring(0,150)+(t.length>150?"...":"")})(e.testimonial)}),e.websiteUrl&&(0,a.jsx)("a",{href:e.websiteUrl,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-orange-600 hover:underline mt-2 inline-block",children:e.websiteUrl})]}),(0,a.jsxs)("div",{className:"flex items-center gap-1 flex-shrink-0",children:[(0,a.jsx)("button",{type:"button",onClick:()=>M(e),className:"p-2 rounded-lg transition-colors ".concat(e.featured?"text-yellow-500 hover:bg-yellow-50":"text-gray-400 hover:bg-gray-100"),title:e.featured?"Kiemel\xe9s t\xf6rl\xe9se":"Kiemel\xe9s",children:e.featured?(0,a.jsx)(i.A,{className:"w-5 h-5 fill-current"}):(0,a.jsx)(c,{className:"w-5 h-5"})}),(0,a.jsx)("button",{type:"button",onClick:()=>z(e),className:"p-2 rounded-lg transition-colors ".concat(e.isActive?"text-green-600 hover:bg-green-50":"text-gray-400 hover:bg-gray-100"),title:e.isActive?"Elrejt\xe9s":"Megjelen\xedt\xe9s",children:e.isActive?(0,a.jsx)(d.A,{className:"w-5 h-5"}):(0,a.jsx)(m.A,{className:"w-5 h-5"})}),(0,a.jsx)("button",{type:"button",onClick:()=>{f(e),v(!0)},className:"p-2 rounded-lg text-gray-400 hover:bg-gray-100 hover:text-gray-600 transition-colors",title:"Szerkeszt\xe9s",children:(0,a.jsx)(u,{className:"w-5 h-5"})}),(0,a.jsx)("button",{type:"button",onClick:()=>S(e.id),className:"p-2 rounded-lg transition-colors ".concat(N===e.id?"bg-red-100 text-red-600":"text-gray-400 hover:bg-red-50 hover:text-red-600"),title:N===e.id?"Kattints \xfajra a t\xf6rl\xe9shez":"T\xf6rl\xe9s",children:(0,a.jsx)(g.A,{className:"w-5 h-5"})})]})]})},e.id))})]})}},7828:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(1847).A)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},9347:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(1847).A)("star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]])}},e=>{e.O(0,[5004,277,1356,775,1926,8441,1255,7358],()=>e(e.s=2777)),_N_E=e.O()}]);